import json
from urllib.request import Request, urlopen

# Corpo simplificado da requisição
values = """
  {
    "limit": 1,
    "razao_fantasia": [
      "Luc's Cestas"
    ]
  }
"""

# Cabeçalhos da requisição
headers = {
    'Content-Type': 'application/json',
    'authorization': 'Bearer {{sua_api_key}}',  # Substitua pela sua chave de API
    'Accept': 'application/json'
}

# Fazer a requisição
url = 'https://cnpj.biz/api/v2/empresas/listar-com-dados'
request = Request(url, data=values.encode('utf-8'), headers=headers)

try:
    response = urlopen(request)
    response_body = response.read().decode('utf-8')
    data = json.loads(response_body)

    print(json.dumps(data, indent=2, ensure_ascii=False))
except Exception as e:
    print(f"Erro na requisição: {e}")
